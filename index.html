<!DOCTYPE html>
<html lang="en">
<head></head>
<body>

<script>
alert("Start?")
 /* function overflow() {
    let bufferArray = [];
    for (var i = 0; i < 32000; i++) {
        bufferArray.push(new ArrayBuffer(1000000));
        if (bufferArray.length > 1000) {
            bufferArray = [];
        }
    }
} */
  

//overflow()

function memExh() {
    let bufferArray = [];
    for (let i = 0; i < 8192; i++) {
        bufferArray.push(new ArrayBuffer(1000000)); // Allocate large buffers
        if (bufferArray.length > 1000) {
            bufferArray = []; // Clear buffer array to exhaust memory
        }
    }
}

function unkown() {
    let largeString = "A".repeat(1000000); // 1 million A's
    let nestedArray = [];
    let obj = {};
    let iterationCount = 0; // Counter to track number of iterations

    while (true) {
        // String concatenation
        largeString += largeString;
        if (largeString.length > 100000000) {
            largeString = "A".repeat(1000000); // Reset string to avoid overflow
        }

        memExh(); // Exhaust memory

        // Nested arrays
        nestedArray.push([]);
        if (nestedArray.length > 1000) {
            nestedArray = []; // Clear nested arrays to exhaust memory
        }
 
 alert("Memory usage after:", process.memoryUsage().heapUsed);

</script>
</body>
</html>
